---
title       : Predicting Iris Sepal Width Given Petal Width and Species
subtitle    : for Coursera's Developing Data Products course
author      : John Pelak
job         : Data Science Specialization
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

## Product Description

This product provides a means to predict the sepal width of iris flowers given their species and petal width.  It uses as set of simple linear models produce by R's lm() function - one for each species of iris present in Ronald Fisher's famous data set (as published in his 1936 paper on topic.)  This data set is included with R, and is used by instructors to teach students how to conduct exploratory data analyses and build proper predictive models.

Implememented using RStudio's Shiny capabilties, this app provides a interface to provide a predicted sepal width given species and petal width input to an HTML simple form.  No special botanical knowledge is required of the user, and resultant predicted values are provided immediately.

Furthermore, a plot themed by species is provided alongside the linear models R yields so that users can quickly see the basis for predicted values, and justification for published results.

---

## Shiny UI Code

The following code produced the server interactions for the Shiny app published at https://github.com/jpelak/jpelakDataProducts/blob/master/ui.R

```{r cache=FALSE, eval=FALSE}
library(shiny)
shinyUI(pageWithSidebar(
  headerPanel("Predicting Sepal Width Given Petal Width by Iris Species"),
  sidebarPanel(
    radioButtons("species", "select iris species", c("I. setosa" = "I.setosa", "I. versicolor" = "I.versicolor", "I. virginica" = "I.virginica")),
    numericInput("petalWidth", "select petal width (cm)", 0.0, min = 0.0, max = 2.5, step = 0.1),
    p("The linear regression model generated by R's lm() function for each iris species (with intercept and slope shown) is:"),
    p("I. setosa"),
    verbatimTextOutput("setosaModelCoeff"),
    p("I. versicolor"),
    verbatimTextOutput("versicolorModelCoeff"),
    p("I. virginica"),
    verbatimTextOutput("virginicaModelCoeff")
  ),
  mainPanel(
    h4("Documentation"),
    p("In Fisher's famous Iris data set, we can see the relationship between sepal and petal length by species (as shown in the plot below.)  You can make use of a simple regression model to predict sepal width by setting the species and petal width in the panel on the left.  The app will automatically react and update your input and predicted output in the pane below."),
    plotOutput("sepalPetalPlot"),
    p("Using the linear model generated by R's lm() function for each species (as displayed in the left panel), for the selected iris species and petal width:"),
    textOutput("selectedSpecies"),
    textOutput("selectedPetalWidth"),
    h5("the predicted sepal width is:"),
    verbatimTextOutput("predictedSepalWidth")
  )
  ))
```

---
## Shiny Server Code

The following code produced the user interface for the Shiny app published at https://github.com/jpelak/jpelakDataProducts/blob/master/server.R

```{r cache=FALSE, eval=FALSE}
library(shiny)
library(ggplot2)

setosaIris <- iris[iris$Species=="setosa",]
versicolorIris <- iris[iris$Species=="versicolor",]
virginicaIris <- iris[iris$Species=="virginica",]

setosaModel <- lm(Sepal.Width ~ Petal.Width, data=setosaIris)
versicolorModel <- lm(Sepal.Width ~ Petal.Width, data=versicolorIris)
virginicaModel <- lm(Sepal.Width ~ Petal.Width, data=virginicaIris)

shinyServer(
  function(input, output) {
    output$setosaModelCoeff <- renderPrint(setosaModel$coefficients)
    output$versicolorModelCoeff <- renderPrint(versicolorModel$coefficients)
    output$virginicaModelCoeff <- renderPrint(virginicaModel$coefficients)
    output$selectedSpecies <- renderPrint(input$species)
    output$selectedPetalWidth <- renderPrint(input$petalWidth)
    output$predictedSepalWidth <- renderText({
         if(input$species == "I.setosa") {
           setosaModel$coefficients[1] + (input$petalWidth * setosaModel$coefficients[2])
         }
         else if (input$species == "I.versicolor") {
           versicolorModel$coefficients[1] + (input$petalWidth * setosaModel$coefficients[2])
         }
         else if (input$species == "I.virginica") {
           virginicaModel$coefficients[1] + (input$petalWidth * setosaModel$coefficients[2])
         }
    })
    
    
    output$sepalPetalPlot <- renderPlot({
      qplot(Petal.Width,Sepal.Width,colour=Species,data=iris,xlab="Petal Width", ylab="Sepal Width")
    })
  }
)
```

---
## Result

You can test the application for yourself up at https://jpelak.shinyapps.io/jpelakDataProducts.  I hope you enjoy the experience, and I look forward to reading your feedback.

jmp
